apiVersion: v1
kind: ConfigMap
metadata:
  name: backend-config
  namespace: ${K8S_NAMESPACE}
data:
  # Azure OpenAI
  AZURE_OPENAI_ENDPOINT: "${AZURE_OPENAI_ENDPOINT}"
  AZURE_OPENAI_TENANT_ID: "${AZURE_OPENAI_TENANT_ID}"
  AZURE_OPENAI_AUTH_MODE: "${AZURE_OPENAI_AUTH_MODE}"
  AZURE_OPENAI_AGENT_DEPLOYMENT: "${AZURE_OPENAI_AGENT_DEPLOYMENT}"
  AZURE_OPENAI_ORCHESTRATOR_DEPLOYMENT: "${AZURE_OPENAI_ORCHESTRATOR_DEPLOYMENT}"
  AZURE_OPENAI_DEPLOYMENT: "${AZURE_OPENAI_AGENT_DEPLOYMENT}"
  AZURE_OPENAI_DEPLOYMENT_NAME: "${AZURE_OPENAI_AGENT_DEPLOYMENT}"
  AZURE_OPENAI_API_VERSION: "${AZURE_OPENAI_API_VERSION}"
  AZURE_OPENAI_TIMEOUT_SECONDS: "${AZURE_OPENAI_TIMEOUT_SECONDS}"
  AZURE_OPENAI_MAX_RETRIES: "${AZURE_OPENAI_MAX_RETRIES}"

  # PostgreSQL (shared - READ ONLY)
  PGHOST: "${PGHOST}"
  PGPORT: "${PGPORT}"
  PGDATABASE: "${PGDATABASE}"
  PGUSER: "${PGUSER}"

  # Redis
  BACKEND_REDIS_HOST: "${BACKEND_REDIS_HOST}"
  BACKEND_REDIS_PORT: "${BACKEND_REDIS_PORT}"

  # App config
  LOG_LEVEL: "${LOG_LEVEL}"
  PYTHONPATH: "/app"
  ENVIRONMENT: "${ENVIRONMENT}"

  # Uvicorn
  UVICORN_WORKERS: "${UVICORN_WORKERS}"
  UVICORN_TIMEOUT_SECONDS: "${UVICORN_TIMEOUT_SECONDS}"
  UVICORN_KEEPALIVE_SECONDS: "${UVICORN_KEEPALIVE_SECONDS}"

  # Tenant guardrails
  EXPECTED_RUNTIME_TENANT_ID: "${EXPECTED_RUNTIME_TENANT_ID}"
  EXPECTED_RUNTIME_SUBSCRIPTION_ID: "${EXPECTED_RUNTIME_SUBSCRIPTION_ID}"

  # OpenTelemetry
  OTEL_SERVICE_NAME: "${APP_NAME}"
